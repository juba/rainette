<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>[en] Introduction to rainette • rainette</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="[en] Introduction to rainette">
<meta property="og:description" content="rainette">
<meta property="og:image" content="https://juba.github.io/rainette/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rainette</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction_en.html">[en] Introduction to rainette</a>
    </li>
    <li>
      <a href="../articles/introduction_usage.html">[fr] Utilisation de rainette</a>
    </li>
    <li>
      <a href="../articles/algorithmes.html">[fr] Description des algorithmes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/juba/rainette/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="introduction_en_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>[en] Introduction to rainette</h1>
                        <h4 class="author">Julien Barnier</h4>
            
            <h4 class="date">2021-03-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/juba/rainette/blob/master/vignettes/introduction_en.Rmd"><code>vignettes/introduction_en.Rmd</code></a></small>
      <div class="hidden name"><code>introduction_en.Rmd</code></div>

    </div>

    
    
<div id="reinert-textual-clustering-method" class="section level1">
<h1 class="hasAnchor">
<a href="#reinert-textual-clustering-method" class="anchor"></a>Reinert textual clustering method</h1>
<p><code>rainette</code> is an R implementation of the Reinert textual clustering algorithm. This algorithm is already available in softwares like <a href="http://www.iramuteq.org/">Iramuteq</a> or Alceste, the goal of <code>rainette</code> is to provide it as an R package.</p>
<p>This is not a new algorithm, as the first articles describing it date back to 1983. Here are some features of the method :</p>
<ul>
<li>each text is only assigned to one cluster, unlike methods like LDA.</li>
<li>it is better suited to cluster small “homogeneous” documents : in fact the good practice is first to split texts into segments before applying the method.</li>
<li>as the algorithm uses a singular value decomposition of a document-term matrix, the algorithm may not work on very large corpus.</li>
</ul>
<div id="description-of-the-algorithm" class="section level2">
<h2 class="hasAnchor">
<a href="#description-of-the-algorithm" class="anchor"></a>Description of the algorithm</h2>
<p>The Reinert method is a divisive hierarchical clustering algorithm whose aim is to maximise the inter-cluster Chi-squared distance.</p>
<p>The algorithm is applied to the document-term matrix computed on the corpus. Documents are called <code>uce</code> (elementary context units). If an <code>uce</code> doesn’t include enough terms, it is merged with the following one into an <code>uc</code> (context unit). The resulting matrix is then weighted as binary, so only the presence/absence of terms are taken into account, not their frequencies.</p>
<p>The aim is to split this matrix into two clusters by maximizing the Chi-squared distance between those. As an exhaustive search would be too compute-intensive, the following method is used to get a good approximation :</p>
<ul>
<li>first, <code>uc</code> are ordered according to their coordinates on the first axis of the correspondance analysis of the binary matrix.</li>
<li>
<code>uc</code> are grouped in two clusters based on this order, and the grouping with the maximum inter-cluster Chi-squared distance is kept.</li>
<li>based on this grouping, each <code>uc</code> is in turn assigned to the other cluster. If this new assignment gives a higher inter-cluster Chi-squared value, it is kept. The operation is repeated until no new assignment gives a higher Chi-squared.</li>
<li>finally, on the resulting clusters binary matrices, features are selected based on their frequency and on a contingency coefficient minimum value.</li>
<li>the biggest of the two resulting clusters is then split with the same algorithm.</li>
</ul>
</div>
<div id="double-clustering" class="section level2">
<h2 class="hasAnchor">
<a href="#double-clustering" class="anchor"></a>Double clustering</h2>
<p>The Reinert method suggests to do a double clustering to get more robust clusters. This method is also implemented in <code>rainette</code>.</p>
<p>The principle is to run two simple clusterings by varying the minimum <code>uc</code> size. For example, the first one will be run with a minimum size of 10 terms, and the second one with a minimum size of 15.</p>
<p>The two sets of clusters are then “crossed” : every pair of clusters of each clustering are crossed together, even if they are not on the same hierarchical level. We then compute the number of <code>uc</code> present in both clusters, and a Chi-squared value of association between them.</p>
<p>Only a subset of all these “crossed-clusters” are kept : those with different elements, with a minimum number of <code>uc</code> or with a minimum association value. Then, for a given number of clusters <code>k</code>, the algorithm looks for the optimal partition of crossed-clusters, <em>ie</em> it keeps the set of crossed-clusters with no common elements, and with either the higher total number of elements, or the higher sum of Chi-squared association coefficients.</p>
<p>Then, this optimal partition is used either as the final clustering (with potentially quite a high proportion of <code>NA</code>), or as a starting point for a k-nearest-neighbour clustering for non-assigned documents.</p>
</div>
<div id="references-in-french" class="section level2">
<h2 class="hasAnchor">
<a href="#references-in-french" class="anchor"></a>References (in french)</h2>
<ul>
<li>Reinert M, Une méthode de classification descendante hiérarchique : application à l’analyse lexicale par contexte, Cahiers de l’analyse des données, Volume 8, Numéro 2, 1983. <a href="http://www.numdam.org/item/?id=CAD_1983__8_2_187_0" class="uri">http://www.numdam.org/item/?id=CAD_1983__8_2_187_0</a>
</li>
<li>Reinert M., Alceste une méthodologie d’analyse des données textuelles et une application: Aurelia De Gerard De Nerval, Bulletin de Méthodologie Sociologique, Volume 26, Numéro 1, 1990. <a href="https://doi.org/10.1177/075910639002600103" class="uri">https://doi.org/10.1177/075910639002600103</a>
</li>
</ul>
</div>
</div>
<div id="rainette-usage" class="section level1">
<h1 class="hasAnchor">
<a href="#rainette-usage" class="anchor"></a><code>rainette</code> usage</h1>
<div id="corpus-preparation" class="section level2">
<h2 class="hasAnchor">
<a href="#corpus-preparation" class="anchor"></a>Corpus preparation</h2>
<div id="split_segments" class="section level3">
<h3 class="hasAnchor">
<a href="#split_segments" class="anchor"></a><code>split_segments</code>
</h3>
<p>As explained before, as it doesn’t take into account terms frequencies and assign each document to only one cluster, the Reinert method must be applied to short and “homogeneous” documents. It could be ok if your work on short comments on a website, but on longer documents the corpus must first be split into small textual segments.</p>
<p>The <code>split_segments</code> function does just that, and can be applied on a <code>tm</code> or <code>quanteda</code> corpus.</p>
<p>On this article we will apply it to the sample <code>data_corpus_inaugural</code> <code>quanteda</code> corpus :</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://quanteda.io">quanteda</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://juba.github.io/rainette/">rainette</a></span><span class="op">)</span>
<span class="va">corpus</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/split_segments.html">split_segments</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span><span class="op">)</span></code></pre></div>
<p><code>split_segments</code> will split the original texts into smaller chunks, attempting to respect sentences and punctuation when possible. The function takes three arguments :</p>
<ul>
<li>
<code>segment_size</code> : the preferred segment size, in words</li>
<li>
<code>segment_size_window</code> : the “window” into which looking for the best segment split, in words. If <code>NULL</code>, it is set to 0.4*<code>segment_size</code>.</li>
<li>
<code>force_single_core</code> : by default, multithreading is used when the corpus is big. Set this to <code>TRUE</code> to disable multithreading completely.</li>
</ul>
<p>The result of the function is always a <code>quanteda</code> corpus, which keeps the original corpus metadata :</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">corpus</span></code></pre></div>
<pre><code>## Corpus consisting of 3,527 documents and 5 docvars.
## 1789-Washington_1 :
## "Fellow-Citizens of the Senate and of the House of Representa..."
## 
## 1789-Washington_2 :
## "On the one hand, I was summoned by my Country, whose voice I..."
## 
## 1789-Washington_3 :
## "as the asylum of my declining years - a retreat which was re..."
## 
## 1789-Washington_4 :
## "On the other hand, the magnitude and difficulty of the trust..."
## 
## 1789-Washington_5 :
## "could not but overwhelm with despondence one who (inheriting..."
## 
## 1789-Washington_6 :
## "In this conflict of emotions all I dare aver is that it has ..."
## 
## [ reached max_ndoc ... 3,521 more documents ]</code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="https://quanteda.io/reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">corpus</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##   Year  President FirstName Party  segment_source
## 1 1789 Washington    George  none 1789-Washington
## 2 1789 Washington    George  none 1789-Washington
## 3 1789 Washington    George  none 1789-Washington
## 4 1789 Washington    George  none 1789-Washington
## 5 1789 Washington    George  none 1789-Washington
## 6 1789 Washington    George  none 1789-Washington</code></pre>
</div>
<div id="dfm-computation" class="section level3">
<h3 class="hasAnchor">
<a href="#dfm-computation" class="anchor"></a>dfm computation</h3>
<p>Next step is to compute the document-feature matrix. As our <code>corpus</code> object is a <code>quanteda</code> corpus, we can use its <code>dfm</code> function :</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dtm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/dfm.html">dfm</a></span><span class="op">(</span><span class="va">corpus</span>, remove <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span>, tolower <span class="op">=</span> <span class="cn">TRUE</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>We only keep the terms that appear at least in 10 segments by using <code>dfm_trim</code> :</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dtm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/dfm_trim.html">dfm_trim</a></span><span class="op">(</span><span class="va">dtm</span>, min_termfreq <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="simple-clustering" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-clustering" class="anchor"></a>Simple clustering</h2>
<p>We are now ready to compute a simple Reinert clustering by using the <code>rainette</code> function. Its main arguments are :</p>
<ul>
<li>
<code>k</code> : the number of clusters to compute.</li>
<li>
<code>min_uc_size</code> : the minimum number of terms in each context unit at startup (default : 10). If a <code>dfm</code> document contains less than this number of terms, it will be merged with the following one.</li>
<li>
<code>min_split_members</code> : if a cluster is smaller than this value, it won’t be split afterwards (default : 5).</li>
</ul>
<p>Here we will compute 5 clusters with a <code>minimum_uc_size</code> of 15 :</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rainette.html">rainette</a></span><span class="op">(</span><span class="va">dtm</span>, k <span class="op">=</span> <span class="fl">5</span>, min_uc_size <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></code></pre></div>
<p>To help exploring the clustering results, <code>rainette</code> offers a small <em>shiny gadget</em> which can be launched with <code>rainette_explor</code> :</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/rainette_explor.html">rainette_explor</a></span><span class="op">(</span><span class="va">res</span>, <span class="va">dtm</span><span class="op">)</span></code></pre></div>
<p>The interactive interface should look something like this :</p>
<p><img src="rainette_explor_en.png"></p>
<p>You can change the number of clusters, the keyness statistic used, etc., and see the result in real time. The most characteristics terms are displayed with a blue bar or a red one for those with a negative keyness.</p>
<p>It’s also possible to display terms keyness as word clouds :</p>
<p><img src="rainette_explor_en_cloud.png"></p>
<p>At any time, you can click on the <em>Get R code</em> button to get the R code to reproduce the current plot and to compute cluster membership.</p>
<p>You can also directly use <code>cutree_rainette</code> to get each document cluster at level <code>k</code> :</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cutree_rainette.html">cutree_rainette</a></span><span class="op">(</span><span class="va">res</span>, k <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<p>This vector can be used, for example, as a new corpus metadata variable :</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">corpus</span><span class="op">$</span><span class="va">group</span> <span class="op">&lt;-</span> <span class="va">groups</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="https://quanteda.io/reference/docvars.html">docvars</a></span><span class="op">(</span><span class="va">corpus</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##   Year  President FirstName Party  segment_source group
## 1 1789 Washington    George  none 1789-Washington     2
## 2 1789 Washington    George  none 1789-Washington     2
## 3 1789 Washington    George  none 1789-Washington     2
## 4 1789 Washington    George  none 1789-Washington     2
## 5 1789 Washington    George  none 1789-Washington     1
## 6 1789 Washington    George  none 1789-Washington     1</code></pre>
<p>Finally, you can also directly compute each cluster keyness statistics with the <code>rainette_stats</code> function :</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/rainette_stats.html">rainette_stats</a></span><span class="op">(</span><span class="va">corpus</span><span class="op">$</span><span class="va">group</span>, <span class="va">dtm</span>, n_terms <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<pre><code>## Registered S3 methods overwritten by 'quanteda.textstats':
##   method                       from    
##   [.textstat                   quanteda
##   as.data.frame.textstat_proxy quanteda
##   as.list.textstat_proxy       quanteda
##   head.textstat_proxy          quanteda
##   tail.textstat_proxy          quanteda</code></pre>
<pre><code>## [[1]]
## # A tibble: 5 x 6
##   feature    chi2     p n_target n_reference sign    
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   
## 1 duties     231.     0       43          49 positive
## 2 office     217.     0       37          37 positive
## 3 discharge  153.     0       20          11 positive
## 4 trust      132.     0       27          33 positive
## 5 station    128.     0       13           3 positive
## 
## [[2]]
## # A tibble: 5 x 6
##   feature  chi2     p n_target n_reference sign    
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   
## 1 world   -151.     0       54         257 negative
## 2 us      -144.     0      118         360 negative
## 3 america -129.     0       19         165 negative
## 4 new     -111.     0       46         201 negative
## 5 states   109.     0      268          65 positive
## 
## [[3]]
## # A tibble: 5 x 6
##   feature  chi2     p n_target n_reference sign    
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   
## 1 world    209.     0      253          58 positive
## 2 us       200.     0      348         130 positive
## 3 america  168.     0      162          22 positive
## 4 new      146.     0      195          52 positive
## 5 let      130.     0      133          21 positive</code></pre>
</div>
<div id="double-clustering-1" class="section level2">
<h2 class="hasAnchor">
<a href="#double-clustering-1" class="anchor"></a>Double clustering</h2>
<p><code>rainette</code> also offers a “double clustering” algorithm, as described above : two simple clusterings are computed with varying <code>min_uc_size</code>, and then combined to get a better partition and more robust clusters.</p>
<p>This can be done with the <code>rainette2</code> function</p>
<p><code>rainette2</code> can be applied to two already computed simple clusterings. Here, we compute them with <code>min_uc_size</code> at 10 and 15 :</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rainette.html">rainette</a></span><span class="op">(</span><span class="va">dtm</span>, k <span class="op">=</span> <span class="fl">5</span>, min_uc_size <span class="op">=</span> <span class="fl">10</span>, min_split_members <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="va">res2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rainette.html">rainette</a></span><span class="op">(</span><span class="va">dtm</span>, k <span class="op">=</span> <span class="fl">5</span>, min_uc_size <span class="op">=</span> <span class="fl">15</span>, min_split_members <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<p>We then use <code>rainette2</code> to combine them. The main function arguments are <code>max_k</code>, the maximum number of clusters, and <code>min_members</code>, the minimum cluster size :</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rainette2.html">rainette2</a></span><span class="op">(</span><span class="va">res1</span>, <span class="va">res2</span>, max_k <span class="op">=</span> <span class="fl">5</span>, min_members <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<p>Another way is to call <code>rainette2</code> directly on our <code>dtm</code> matrix by giving it two <code>uc_size1</code> and <code>uc_size2</code> arguments :</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rainette2.html">rainette2</a></span><span class="op">(</span><span class="va">dtm</span>, uc_size1 <span class="op">=</span> <span class="fl">10</span>, uc_size2 <span class="op">=</span> <span class="fl">15</span>, max_k <span class="op">=</span> <span class="fl">5</span>, min_members <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<p>The resulting object is a <em>tibble</em> with, for each level <em>k</em>, the optimal partitions and their characteristics. Another interactive interface is available to explore the results. It is launched with <code>rainette2_explor</code> :</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/rainette2_explor.html">rainette2_explor</a></span><span class="op">(</span><span class="va">res</span>, <span class="va">dtm</span><span class="op">)</span></code></pre></div>
<p><img src="rainette2_explor_en.png"></p>
<p>The interface is very similar to the previous one, except there is no dendrogram anymore, but a single barplot with each cluster size instead. Be careful of the number of <code>NA</code> (not assigned documents), as it can be quite high. You can still use the <em>Get R code</em> button to get the current plot code, and use <code>cutree_rainette</code> to get clusters membership.</p>
<p><code>rainette_stats</code> can also be used to get keyness statistics for each cluster :</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cutree.html">cutree</a></span><span class="op">(</span><span class="va">res</span>, <span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="../reference/rainette_stats.html">rainette_stats</a></span><span class="op">(</span><span class="va">groups</span>, <span class="va">dtm</span>, n_terms <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<pre><code>## [[1]]
## # A tibble: 5 x 6
##   feature  chi2     p n_target n_reference sign    
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   
## 1 us      -224.     0      110         368 negative
## 2 world   -205.     0       52         259 negative
## 3 america -166.     0       18         166 negative
## 4 new     -144.     0       47         200 negative
## 5 let     -139.     0       15         139 negative
## 
## [[2]]
## # A tibble: 5 x 6
##   feature    chi2     p n_target n_reference sign    
##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   
## 1 mr        2539.     0       20          11 positive
## 2 vice      1906.     0       13           4 positive
## 3 senator   1167.     0        8           2 positive
## 4 president  871.     0       20          68 positive
## 5 chief      508.     0       10          26 positive
## 
## [[3]]
## # A tibble: 5 x 6
##   feature  chi2     p n_target n_reference sign    
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   
## 1 us       213.     0      330         148 positive
## 2 world    207.     0      237          74 positive
## 3 america  185.     0      157          27 positive
## 4 new      173.     0      191          56 positive
## 5 let      157.     0      132          22 positive</code></pre>
<p>Finally, if some points are not assigned to any cluster, you can use <code>rainette2_complete_groups</code> to assign them to the nearest one by using a <em>k-nearest-neighbors</em> algorithm :</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">groups_completed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rainette2_complete_groups.html">rainette2_complete_groups</a></span><span class="op">(</span><span class="va">dtm</span>, <span class="va">groups</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Julien Barnier.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
