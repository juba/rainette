<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>[en] Introduction to rainette • rainette</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="[en] Introduction to rainette">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rainette</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/introduction_en.html">[en] Introduction to rainette</a></li>
    <li><a class="dropdown-item" href="../articles/algorithms_en.html">[en] Algorithms description</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_usage.html">[fr] Utilisation de rainette</a></li>
    <li><a class="dropdown-item" href="../articles/algorithmes.html">[fr] Description des algorithmes</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/juba/rainette/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>[en] Introduction to rainette</h1>
                        <h4 data-toc-skip class="author">Julien
Barnier</h4>
            
            <h4 data-toc-skip class="date">2026-01-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/juba/rainette/blob/main/vignettes/introduction_en.Rmd" class="external-link"><code>vignettes/introduction_en.Rmd</code></a></small>
      <div class="d-none name"><code>introduction_en.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="corpus-preparation">Corpus preparation<a class="anchor" aria-label="anchor" href="#corpus-preparation"></a>
</h2>
<p>For a description of the Reinert clustering method and its
implementation in <code>rainette</code>, please see the <a href="algorithms_en.html">algorithms description vignette</a>.</p>
<div class="section level3">
<h3 id="split-corpus-into-segments">Split corpus into segments<a class="anchor" aria-label="anchor" href="#split-corpus-into-segments"></a>
</h3>
<p>As it doesn’t take into account terms frequencies but only there
presence / absence, and as it assigns each document to only one cluster,
the Reinert method must be applied to short and “homogeneous” documents.
It could be ok if you work on tweets or short answers to a specific
question, but with longer documents they must first be split into short
textual segments.</p>
<p>You can use the <code><a href="../reference/split_segments.html">split_segments()</a></code> function for that, and
it can be applied directly on a <code>tm</code> or <code>quanteda</code>
corpus. In this article we will apply it to the sample
<code>data_corpus_inaugural</code> corpus provided by
<code>quanteda</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quanteda.io" class="external-link">quanteda</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://juba.github.io/rainette/">rainette</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Split documents into segments</span></span>
<span><span class="va">corpus</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/split_segments.html">split_segments</a></span><span class="op">(</span><span class="va">data_corpus_inaugural</span>, segment_size <span class="op">=</span> <span class="fl">40</span><span class="op">)</span></span></code></pre></div>
<p><code>split_segments</code> will split the original texts into
smaller chunks, attempting to respect sentences and punctuation when
possible. The function takes two arguments :</p>
<ul>
<li>
<code>segment_size</code> : the preferred segment size, in
words</li>
<li>
<code>segment_size_window</code> : the “window” into which looking
for the best segment split, in words. If <code>NULL</code>, it is set to
<code>0.4 * segment_size</code>.</li>
</ul>
<p>The result of the function is a <code>quanteda</code> corpus, which
keeps the original corpus metadata and adds an additional
<code>segment_source</code> variable, which keeps track of which segment
belongs to which document.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corpus</span></span></code></pre></div>
<pre><code><span><span class="co">## Corpus consisting of 3,658 documents and 5 docvars.</span></span>
<span><span class="co">## 1789-Washington_1 :</span></span>
<span><span class="co">## "Fellow-Citizens of the Senate and of the House of Representa..."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1789-Washington_2 :</span></span>
<span><span class="co">## "On the one hand, I was summoned by my Country, whose voice I..."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1789-Washington_3 :</span></span>
<span><span class="co">## "as the asylum of my declining years - a retreat which was re..."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1789-Washington_4 :</span></span>
<span><span class="co">## "On the other hand, the magnitude and difficulty of the trust..."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1789-Washington_5 :</span></span>
<span><span class="co">## "could not but overwhelm with despondence one who (inheriting..."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1789-Washington_6 :</span></span>
<span><span class="co">## "In this conflict of emotions all I dare aver is that it has ..."</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [ reached max_ndoc ... 3,652 more documents ]</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://quanteda.io/reference/docvars.html" class="external-link">docvars</a></span><span class="op">(</span><span class="va">corpus</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   Year  President FirstName Party  segment_source</span></span>
<span><span class="co">## 1 1789 Washington    George  none 1789-Washington</span></span>
<span><span class="co">## 2 1789 Washington    George  none 1789-Washington</span></span>
<span><span class="co">## 3 1789 Washington    George  none 1789-Washington</span></span>
<span><span class="co">## 4 1789 Washington    George  none 1789-Washington</span></span>
<span><span class="co">## 5 1789 Washington    George  none 1789-Washington</span></span>
<span><span class="co">## 6 1789 Washington    George  none 1789-Washington</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="dfm-computation">dfm computation<a class="anchor" aria-label="anchor" href="#dfm-computation"></a>
</h3>
<p>The next step is to compute the document-feature matrix. As our
<code>corpus</code> object is a <code>quanteda</code> corpus, we can
tokenize it and then use the <code><a href="https://quanteda.io/reference/dfm.html" class="external-link">dfm()</a></code> function.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tok</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/tokens.html" class="external-link">tokens</a></span><span class="op">(</span><span class="va">corpus</span>, remove_punct <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">tok</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/tokens_tolower.html" class="external-link">tokens_tolower</a></span><span class="op">(</span><span class="va">tok</span><span class="op">)</span></span>
<span><span class="va">tok</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/tokens_select.html" class="external-link">tokens_remove</a></span><span class="op">(</span><span class="va">tok</span>, <span class="fu"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html" class="external-link">stopwords</a></span><span class="op">(</span><span class="st">"en"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dtm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/dfm.html" class="external-link">dfm</a></span><span class="op">(</span><span class="va">tok</span><span class="op">)</span></span></code></pre></div>
<p>We also filter out terms that appear in less than 10 segments by
using <code>dfm_trim</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dtm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/dfm_trim.html" class="external-link">dfm_trim</a></span><span class="op">(</span><span class="va">dtm</span>, min_docfreq <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="simple-clustering">Simple clustering<a class="anchor" aria-label="anchor" href="#simple-clustering"></a>
</h2>
<p>We are now ready to compute a simple Reinert clustering by using the
<code><a href="../reference/rainette.html">rainette()</a></code> function. Its main arguments are :</p>
<ul>
<li>
<code>k</code> : the number of clusters to compute.</li>
<li>
<code>min_segment_size</code> : the minimum number of terms in each
segment. If a segment contains less than this number of terms, it will
be merged with the following or previous one if they come from the same
source document. The default value is 0, <em>ie</em> no merging is
done.</li>
<li>
<code>min_split_members</code> : if a cluster is smaller than this
value, it won’t be split afterwards (default : 5).</li>
</ul>
<p>Here we will compute 5 clusters with a <code>min_segment_size</code>
of 15 :</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rainette.html">rainette</a></span><span class="op">(</span><span class="va">dtm</span>, k <span class="op">=</span> <span class="fl">5</span>, min_segment_size <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span></code></pre></div>
<p>To help exploring the clustering results, <code>rainette</code>
provides an interactive interface which can be launched with
<code><a href="../reference/rainette_explor.html">rainette_explor()</a></code> :</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rainette_explor.html">rainette_explor</a></span><span class="op">(</span><span class="va">res</span>, <span class="va">dtm</span>, <span class="va">corpus</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="img/rainette_explor_plot_en.png" alt="rainette_explor() interface"><div class="figcaption">rainette_explor() interface</div>
</div>
<p>The interface allows to change the number of clusters, the displayed
statistic, etc., and see the result in real time. By default the most
specific terms are displayed with a blue bar or a red one for those with
a negative keyness (if <em>Show negative values</em> has been
checked).</p>
<p>You can also click on the <em>Get R code</em> button to get the R
code to reproduce the current plot and to compute cluster
membership.</p>
<p>The <em>Cluster documents</em> tab allows to browse the documents
from a given cluster. You can filter them by giving a term or a regular
expression in the <em>Filter by term</em> field :</p>
<div class="float">
<img src="img/rainette_explor_docs_en.png" alt="rainette_explor() cluster documents tab"><div class="figcaption">rainette_explor() cluster documents tab</div>
</div>
<p>You can use <code>cutree</code> to get each document cluster at level
<code>k</code> :</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cluster</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cutree.html">cutree</a></span><span class="op">(</span><span class="va">res</span>, k <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>This vector can be used, for example, as a new corpus metadata
variable :</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corpus</span><span class="op">$</span><span class="va">cluster</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cutree.html">cutree</a></span><span class="op">(</span><span class="va">res</span>, k <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="https://quanteda.io/reference/docvars.html" class="external-link">docvars</a></span><span class="op">(</span><span class="va">corpus</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   Year  President FirstName Party  segment_source cluster</span></span>
<span><span class="co">## 1 1789 Washington    George  none 1789-Washington       4</span></span>
<span><span class="co">## 2 1789 Washington    George  none 1789-Washington       4</span></span>
<span><span class="co">## 3 1789 Washington    George  none 1789-Washington       5</span></span>
<span><span class="co">## 4 1789 Washington    George  none 1789-Washington       5</span></span>
<span><span class="co">## 5 1789 Washington    George  none 1789-Washington       3</span></span>
<span><span class="co">## 6 1789 Washington    George  none 1789-Washington       3</span></span></code></pre>
<p>Here, the clusters have been assigned to the segments, not to the
original documents as a whole. The <code>clusters_by_doc_table</code>
allows to display, for each original document, the number of segment
belonging to each cluster :</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/clusters_by_doc_table.html">clusters_by_doc_table</a></span><span class="op">(</span><span class="va">corpus</span>, clust_var <span class="op">=</span> <span class="st">"cluster"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 60 × 6</span></span></span>
<span><span class="co">##    doc_id          clust_1 clust_2 clust_3 clust_4 clust_5</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> 1789-Washington       0       0       6      29       2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> 1793-Washington       0       0       4       0       0</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> 1797-Adams            0       8       2      46       3</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> 1801-Jefferson        0      18       2      22       2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> 1805-Jefferson        0       5       3      43       6</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> 1809-Madison          0       0       7      17       4</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> 1813-Madison          0       5       3      23       2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> 1817-Monroe           0       3      10      61      14</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> 1821-Monroe           0       2      10      72      31</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> 1825-Adams            0      10       8      49      10</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 50 more rows</span></span></span></code></pre>
<p>By adding <code>prop = TRUE</code>, the same table is displayed with
row percentages :</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/clusters_by_doc_table.html">clusters_by_doc_table</a></span><span class="op">(</span><span class="va">corpus</span>, clust_var <span class="op">=</span> <span class="st">"cluster"</span>, prop <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 60 × 6</span></span></span>
<span><span class="co">##    doc_id          clust_1 clust_2 clust_3 clust_4 clust_5</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> 1789-Washington       0    0      16.2     78.4    5.41</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> 1793-Washington       0    0     100        0      0   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> 1797-Adams            0   13.6     3.39    78.0    5.08</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> 1801-Jefferson        0   40.9     4.55    50      4.55</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> 1805-Jefferson        0    8.77    5.26    75.4   10.5 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> 1809-Madison          0    0      25       60.7   14.3 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> 1813-Madison          0   15.2     9.09    69.7    6.06</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> 1817-Monroe           0    3.41   11.4     69.3   15.9 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> 1821-Monroe           0    1.74    8.70    62.6   27.0 </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> 1825-Adams            0   13.0    10.4     63.6   13.0 </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 50 more rows</span></span></span></code></pre>
<p>Conversely, the <code>docs_by_cluster_table</code> allows to display,
for each cluster, the number and proportion of original document
including at least one segment of this cluster :</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/docs_by_cluster_table.html">docs_by_cluster_table</a></span><span class="op">(</span><span class="va">corpus</span>, clust_var <span class="op">=</span> <span class="st">"cluster"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">##   cluster     n   `%`</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> clust_1    14  23.3</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> clust_2    55  91.7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> clust_3    33  55  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> clust_4    44  73.3</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> clust_5    38  63.3</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="double-clustering">Double clustering<a class="anchor" aria-label="anchor" href="#double-clustering"></a>
</h2>
<p><code>rainette</code> also provides a “double clustering” algorithm,
as described in the <a href="algorithms_en.html">algorithms
description</a> vignette : two simple clusterings are computed with
different <code>min_segment_size</code> values, and then crossed
together to get more robust clusters.</p>
<p>This can be done with the <code><a href="../reference/rainette2.html">rainette2()</a></code> function, which
can be applied to two already computed simple clusterings. Here, we
compute them with <code>min_segment_size</code> at 10 and 15.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rainette.html">rainette</a></span><span class="op">(</span><span class="va">dtm</span>, k <span class="op">=</span> <span class="fl">5</span>, min_segment_size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">res2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rainette.html">rainette</a></span><span class="op">(</span><span class="va">dtm</span>, k <span class="op">=</span> <span class="fl">5</span>, min_segment_size <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span></code></pre></div>
<p>We then use <code><a href="../reference/rainette2.html">rainette2()</a></code> to combine them. The
<code>max_k</code> argument is used to specify the maximum number of
clusters.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rainette2.html">rainette2</a></span><span class="op">(</span><span class="va">res1</span>, <span class="va">res2</span>, max_k <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>One important argument of <code><a href="../reference/rainette2.html">rainette2()</a></code> is the
<code>full</code> argument :</p>
<ul>
<li>If <code>full = TRUE</code> (the default), the best crossed clusters
partition selection is made by keeping all non empty crossed clusters.
This allows an exhaustive search and to identify the partition either
with the highest sum of association χ², or the one with the highest
total size. However, computation times can rise rapidly with the number
of clusters.</li>
<li>If <code>full = FALSE</code>, only the crossed clusters whose
clusters are the most mutually associated are kept. Computations are
much faster, but the highest <em>k</em> level with available partitions
may be lower, and only the partitions with the highest association χ²
values can be identified.</li>
</ul>
<p>To be noted : with <code>full = TRUE</code>, if runtime is too high
you can add the <code>parallel = TRUE</code> argument to paralellise
some computations (won’t work on Windows, though, and may use much more
RAM).</p>
<p>In both cases, the resulting object is a <em>tibble</em> with, for
each level <em>k</em>, the optimal partitions and their characteristics.
Another interactive interface is available to explore the results. It is
launched with <code><a href="../reference/rainette2_explor.html">rainette2_explor()</a></code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rainette2_explor.html">rainette2_explor</a></span><span class="op">(</span><span class="va">res</span>, <span class="va">dtm</span>, <span class="va">corpus</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="img/rainette2_explor_en.png" alt="rainette2_explor() interface"><div class="figcaption">rainette2_explor() interface</div>
</div>
<p>The interface is very similar to the previous one, except there is no
dendrogram anymore, but a single barplot of cluster sizes instead. Be
careful of the number of <code>NA</code> (not assigned segments), as it
can be quite high.</p>
<p>If some points are not assigned to any cluster, you can use
<code><a href="../reference/rainette2_complete_groups.html">rainette2_complete_groups()</a></code> to assign them to the nearest
one by using a <em>k-nearest-neighbors</em> algorithm (with k=1).
However this may not be recommended as you would then loose the
“robustness” of the new clusters computed by
<code><a href="../reference/rainette2.html">rainette2()</a></code>.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">clusters</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cutree.html">cutree</a></span><span class="op">(</span><span class="va">res</span>, k <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">clusters_completed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rainette2_complete_groups.html">rainette2_complete_groups</a></span><span class="op">(</span><span class="va">dtm</span>, <span class="va">clusters</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Julien Barnier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
